<header>
  <div class="container">
      <img src="/../images/logo.png" id="logo" alt="FrankenKopter Logo">
  </div>
  <nav class="nav-admin">
    <ul>
      <li><a href="/admin">Home</a></li>
      <li><a class="active" href="/admin/emails">Emails</a></li>
      <li><a href="/admin/testimonials">Testimonials</a></li>
      <li><a href="/logout">Log Out</a></li>
    </ul>
  </nav>
</header>
<main class="emails">
  <h1>Emails</h1>
  <% @emails.each do |email| %>
    <section class="email">
      <dl>
        <dt>First Name</dt>
        <dd><%= email[:first_name].capitalize %></dd>
      </dl>
      <dl>
        <dt>Last Name</dt>
        <dd><%= email[:last_name].capitalize %></dd>
      </dl>
      <dl>
        <dt>Phone Number</dt>
        <dd>
          <%= email[:phone_number].length == 0 ? 'not provided' :
                                                  email[:phone_number] %>
        </dd>
      </dl>
      <dl>
        <dt>Email</dt>
        <dd><%= email[:email] %></dd>
      </dl>
      <dl>
        <dt>Viewed</dt>
        <dd class="viewed"><%= email[:viewed] %></dd>
      </dl>
      <dl>
        <dt>Sent</dt>
        <dd><%= email[:sent] %></dd>
      </dl>
      <button class="btn flex" type="button" name="view">View Email</button>
    </section>
    <section>
      <div class="overlay"></div>
      <form class="overlay-form" action="/admin/emails/mark_viewed/<%= email[:id] %>" method="post">
        <button class="exit" type="button" name="exit"></button>
        <dl class="third">
          <dt>First Name</dt>
          <dd><%= email[:first_name].capitalize %></dd>
        </dl>
        <dl class="third">
          <dt>Last Name</dt>
          <dd><%= email[:last_name].capitalize %></dd>
        </dl>
        <dl class="third">
          <dt>Email Address</dt>
          <dd><%= email[:email] %></dd>
        </dl>
        <dl class="third">
          <dt>Phone Number</dt>
          <dd>
            <%= email[:phone_number].length == 0 ? 'not provided' :
                                                    email[:phone_number] %>
          </dd>
        </dl>
        <dl>
          <dt>Submitted</dt>
          <dd><%= email[:sent] %></dd>
        </dl>
        <dl>
          <dt>Viewed</dt>
          <dd class="published"><%= email[:viewed] %></dd>
        </dl>
        <dl>
          <dt class="centered">Message</dt>
          <dd><textarea readonly rows="8" cols="80"><%= email[:message] %></textarea></dd>
        </dl>
        <div class="actions">
          <% if  email[:viewed] == 'false' %>
            <input class="btn flex" type="submit" name="mark_viewed" value="Mark Viewed">
          <% end %>
          <button class="btn danger" type="button" name="Delete">Delete</button>
        </div>
      </form>
    </section>
    <section>
      <div class="popup-overlay"></div>
      <div class="popup">
        <p>Are you sure you want to delete this email?</p>
        <p>This action can't be undone!</p>
        <form action="/admin/emails/destroy/<%= email[:id] %>" method="post">
          <fieldset>
              <button class="btn" type="button" name="cancel">Cancel</button>
            <input class="btn danger" type="submit" name="delete" value="Delete">
          </fieldset>
        </form>
      </div>
    </section>
  <% end %>
</main>
